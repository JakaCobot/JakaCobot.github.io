(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{1454:function(t,a,s){"use strict";s.r(a);var e=s(81),n=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"自定义指令基础"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义指令基础"}},[t._v("#")]),t._v(" 自定义指令基础")]),t._v(" "),a("p",[a("strong",[t._v("通过创建JAKA_Command了解自定义指令类型AddOn的开发流程和基础知识。")])]),t._v(" "),a("h2",{attrs:{id:"概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概述"}},[t._v("#")]),t._v(" 概述")]),t._v(" "),a("p",[t._v("  我们将创建一个自定义指令类型的AddOn，当运行该指令时将根据指令块上的内容在App日志中输出不同的内容。")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{width:"800",src:s(908)}})]),t._v(" "),a("h2",{attrs:{id:"创建jaka-command"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建jaka-command"}},[t._v("#")]),t._v(" 创建JAKA_Command")]),t._v(" "),a("h3",{attrs:{id:"step1-创建addon包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step1-创建addon包"}},[t._v("#")]),t._v(" Step1:创建AddOn包")]),t._v(" "),a("p",[t._v("  首先我们需要创建一份AddOn基本文件，包含一个.ini格式的配置文件和一个保存数据的json文件。您可以从头开始手动创建，也可以使用AddOn开发包仓库中 "),a("a",{attrs:{href:"https://github.com/JakaCobot/jaka_addon_kit",target:"_blank",rel:"noopener noreferrer"}},[t._v('"'),a("em",[t._v("Template")]),t._v('"'),a("OutboundLink")],1),t._v(" 目录下的AddOn模板进行修改。")]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("目录结构")]),t._v(" "),a("p",[t._v("|——JAKA_Command"),a("br"),t._v("\n   |——AddOn.json"),a("br"),t._v("\n   |——JAKA_Command_config.ini")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("AddOn.json")]),a("br"),t._v("\n  json文件内容为空即可，后面的步骤中会自动生成数据写入。")]),t._v(" "),a("li",[a("strong",[t._v("JAKA_Command_config.ini")]),a("br"),t._v(" "),a("RouterLink",{attrs:{to:"/guide/addOn/iniConfig.html"}},[t._v("配置文件")]),t._v("内容如下:"),a("div",{staticClass:"language-ini extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ini"}},[a("code",[a("span",{pre:!0,attrs:{class:"token section"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("AddOnInfo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("convention")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("3.0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("name")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("JAKA_Command")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("description")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token inner-value"}},[t._v("在日志中输出信息")]),t._v('"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("version")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1.0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("portal")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("10006")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("url")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("http://localhost/myAddOnUi")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("languagetype")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("node-red")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("service")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("AddOn.json")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("serviceenabled")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1")]),t._v("\n")])])])],1)]),t._v(" "),a("h3",{attrs:{id:"step2-打包-上传"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step2-打包-上传"}},[t._v("#")]),t._v(" Step2:打包&上传")]),t._v(" "),a("p",[t._v("  接下来我们会将AddOn打包，上传至控制器中进行指令块开发。打包的要求格式为"),a("code",[t._v(".tar.gz")]),t._v("。在Windows中您可以使用7z等打包工具进行二次压缩。"),a("br")]),a("div",{attrs:{align:"center"}},[a("img",{attrs:{width:"800",src:s(909)}})]),t._v("\n  在App中附加管理程序页面上传AddOn。"),a("br"),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{width:"800",src:s(910)}})]),a("p"),t._v(" "),a("h3",{attrs:{id:"step3-开发自定义指令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step3-开发自定义指令"}},[t._v("#")]),t._v(" Step3:开发自定义指令")]),t._v(" "),a("p",[t._v("  运行AddOn并查看AddOn运行的端口号。")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{width:"800",src:s(911)}})]),t._v(" "),a("p",[t._v("  使用"),a("code",[t._v("IP:Port")]),t._v("进入开发者界面。")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{width:"1000",src:s(912)}})]),t._v(" "),a("p",[t._v("  使用"),a("code",[t._v("Customized Commands")]),t._v("节点创建自定义指令块。在"),a("em",[t._v("基本配置")]),t._v("页面中定义指令块的样式和属性，在"),a("em",[t._v("脚本生成")]),t._v("页面定义指令块的行为。")]),t._v(" "),a("ul",[a("li",[t._v("脚本语法请参考"),a("RouterLink",{attrs:{to:"/guide/jks.html"}},[t._v("JAKA编程脚本")]),t._v("。")],1),t._v(" "),a("li",[a("code",[t._v("Customized Commands")]),t._v("节点使用请参考"),a("RouterLink",{attrs:{to:"/guide/addOn/Commands_Tool.html"}},[t._v("自定义指令创建节点")])],1)]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{width:"1000",src:s(913)}})]),t._v(" "),a("p",[t._v("  当在App中保存自定义指令时，会通过http的get请求获取脚本，因此需要使用"),a("code",[t._v("http in")]),t._v("和"),a("code",[t._v("http response")]),t._v("节点完善流程。")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{width:"1000",src:s(914)}})]),t._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[t._v("注意！")]),t._v(" "),a("p",[a("code",[t._v("http in")]),t._v(" 节点的url要与自定义指令块的名称一致！")])]),t._v(" "),a("h3",{attrs:{id:"step4-运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#step4-运行"}},[t._v("#")]),t._v(" Step4:运行")]),t._v(" "),a("p",[t._v("  在node-red中部署流程后，即可在App中使用该指令块。")]),t._v(" "),a("div",{attrs:{align:"center"}},[a("img",{attrs:{width:"1000",src:s(915)}})]),t._v(" "),a("h2",{attrs:{id:"如何debug"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何debug"}},[t._v("#")]),t._v(" 如何Debug？")])])}),[],!1,null,null,null);a.default=n.exports},908:function(t,a,s){t.exports=s.p+"assets/img/showcase.23bc5a40.png"},909:function(t,a,s){t.exports=s.p+"assets/img/compress_addon.01c8b684.gif"},910:function(t,a,s){t.exports=s.p+"assets/img/upLoad_addon.aedec686.png"},911:function(t,a,s){t.exports=s.p+"assets/img/run_addOn.00186c20.gif"},912:function(t,a,s){t.exports=s.p+"assets/img/developPage.01a9b62d.png"},913:function(t,a,s){t.exports=s.p+"assets/img/creat_block.148d5ca0.gif"},914:function(t,a,s){t.exports=s.p+"assets/img/Add_Http.57d4df37.gif"},915:function(t,a,s){t.exports=s.p+"assets/img/program_hello.bbf58bd2.gif"}}]);