(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{1742:function(t,e,s){"use strict";s.r(e);var a=s(81),o=Object(a.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"custom-service-development"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#custom-service-development"}},[t._v("#")]),t._v(" Custom Service Development")]),t._v(" "),e("p",[e("strong",[t._v("This page aims to guide developers on how to develop custom service add-ons.")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Please note:")]),t._v(" "),e("p",[t._v("This chapter is an introductory tutorial with the main purpose of providing developers with a basic understanding of custom services and its fundamental development process.")]),t._v(" "),e("p",[t._v("If you want to learn how to develop AddOn packages with specific application features tailored to specific process scenarios, please refer to the subsequent complete case study chapters.")])]),t._v(" "),e("h2",{attrs:{id:"about-custom-services"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#about-custom-services"}},[t._v("#")]),t._v(" About Custom Services")]),t._v(" "),e("h3",{attrs:{id:"what-is-a-custom-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#what-is-a-custom-service"}},[t._v("#")]),t._v(" What is a Custom Service")]),t._v(" "),e("p",[t._v("A custom service is a service that performs tasks in the background, and users do not directly perceive its existence.")]),t._v(" "),e("h3",{attrs:{id:"purpose-of-custom-services"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#purpose-of-custom-services"}},[t._v("#")]),t._v(" Purpose of Custom Services")]),t._v(" "),e("p",[t._v("Custom services are responsible for handling the backend data processing and business logic that is unrelated to user interaction. When combined with Http nodes, custom services can interact with the frontend interface, providing services such as receiving, processing, storing, calculating, and analyzing data for custom commands, custom webpages, or other clients.")]),t._v(" "),e("h2",{attrs:{id:"create-addon-custom-service-package"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#create-addon-custom-service-package"}},[t._v("#")]),t._v(" Create AddOn Custom Service Package")]),t._v(" "),e("p",[t._v("In this demonstration, we will create custom service AddOn package. The functionality of this AddOn is to provide a service to query the robot's power status.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Note:")]),t._v(" "),e("p",[t._v("The JAKA_Service mentioned below is the package name of the AddOn custom command package we are about to create.")])]),t._v(" "),e("h3",{attrs:{id:"step-one-create-addon-folder"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step-one-create-addon-folder"}},[t._v("#")]),t._v(" Step One: Create AddOn Folder")]),t._v(" "),e("p",[t._v("First, we need to create a basic AddOn folder, which should contain a configuration file in "),e("code",[t._v(".ini")]),t._v(" format and a Json file to store data.")]),t._v(" "),e("p",[t._v("You can create a new one or modify the AddOn template in the AddOn development kit repository under the "),e("a",{attrs:{href:"https://github.com/JakaCobot/jaka_addon_kit",target:"_blank",rel:"noopener noreferrer"}},[t._v('"'),e("em",[t._v("Template")]),t._v('"'),e("OutboundLink")],1),t._v(" directory.")]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Directory Structure")]),t._v(" "),e("p",[t._v("|——JAKA_Service"),e("br"),t._v("\n   |——AddOn.json"),e("br"),t._v("\n   |——JAKA_Service_config.ini")])]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("AddOn.json")]),e("br"),t._v("\nThe Json file can be empty. Data will be generated and written in later steps.")]),t._v(" "),e("li",[e("strong",[t._v("JAKA_Service_config.ini")]),e("br"),t._v("\nThe configuration file has the following content:"),e("div",{staticClass:"language-ini extra-class"},[e("pre",{pre:!0,attrs:{class:"language-ini"}},[e("code",[e("span",{pre:!0,attrs:{class:"token section"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token section-name selector"}},[t._v("AddOnInfo")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")])]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("convention")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("3.0")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("name")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("JAKA_Service")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("description")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v('"'),e("span",{pre:!0,attrs:{class:"token inner-value"}},[t._v("JAKA AddOn Service Demo")]),t._v('"')]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("version")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1.0")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("type")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("portal")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("10006")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("url")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("http://localhost/myAddOnUi")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("languagetype")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("node-red")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("service")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("AddOn.json")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token key attr-name"}},[t._v("serviceenabled")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token value attr-value"}},[t._v("1")]),t._v("\n")])])])])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("For detailed explanations of configuration options, refer to: "),e("RouterLink",{attrs:{to:"/en/guide/addOn/7.1-IniConfig.html"}},[t._v("Configuration File Explanation "),e("strong",[t._v("[Click to Jump]")]),t._v(" 👈")])],1)]),t._v(" "),e("h3",{attrs:{id:"step-two-package-upload"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step-two-package-upload"}},[t._v("#")]),t._v(" Step Two: Package & Upload")]),t._v(" "),e("p",[t._v("Next, we will package the folder created in step one and upload it to the controller for command block development. The packaging format should be "),e("code",[t._v(".tar.gz")]),t._v(".")]),t._v(" "),e("p",[t._v("In Windows, you can use tools like 7z for further compression.\n")]),e("div",{attrs:{align:"center"}},[e("img",{attrs:{width:"800",src:s(751)}})]),e("p"),t._v(" "),e("p",[t._v("Attach the AddOn in the App Management page to upload the AddOn.")]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{width:"800",src:s(752)}})]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Summary")]),t._v(" "),e("p",[t._v("Up to now, we have completed the initialization of the AddOn package, packaged it in the standard AddOn format, and uploaded it to the controller.\nNext, we can proceed to develop the specific functionality of the AddOn.")])]),t._v(" "),e("h3",{attrs:{id:"step-three-develop-custom-service"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#step-three-develop-custom-service"}},[t._v("#")]),t._v(" Step Three: Develop Custom Service")]),t._v(" "),e("ol",[e("li",[t._v("Run the AddOn and check the port number on which the AddOn is running.")])]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{width:"800",src:s(753)}})]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("Open a browser and enter the robot's IP + port number ("),e("code",[t._v("IP:Portal")]),t._v(") to access the developer interface.")])]),t._v(" "),e("div",{attrs:{align:"center"}},[e("img",{attrs:{width:"1000",src:s(754)}})]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Summary")]),t._v(" "),e("p",[t._v("After the AddOn runs, the controller starts a node-red instance based on the "),e("code",[t._v("AddOn.json")]),t._v(" file in the AddOn package.\nWe can access this node-red instance by entering the robot's IP and the current running port number of the AddOn.")])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("Please Note:")]),t._v(" "),e("p",[t._v("The running port of the AddOn is not fixed and can change dynamically based on the system's allocation. Therefore, every time you need to use the AddOn port number, you should check the current port number. If you need to use this port number in your code, it is suggested to check check it from the AddOn's configuration file, "),e("code",[t._v("xxx_config.ini")]),t._v(".")])]),t._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[t._v("In the left node bar under the JAKA AddOn directory, find the "),e("code",[t._v("Get Robot Information")]),t._v(' node, double-click to open the edit page, set the name to "Power Status" and select "Robot Status" -> "Power Status" sequentially.')])]),t._v(" "),e("div",{attrs:{align:"center"}},[e("video",{attrs:{width:"1000",controls:"",autoplay:""}},[e("source",{attrs:{src:s(755),type:"video/mp4"}})])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("The usage instructions for the "),e("code",[t._v("Get Robot Information")]),t._v(" node can be found in the HELP in the upper right corner of the webpage.")])]),t._v(" "),e("ol",{attrs:{start:"4"}},[e("li",[t._v("Add the "),e("code",[t._v("http in")]),t._v(" node to listen for GET requests.")])]),t._v(" "),e("div",{attrs:{align:"center"}},[e("video",{attrs:{width:"1000",controls:"",autoplay:""}},[e("source",{attrs:{src:s(756),type:"video/mp4"}})])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Summary")]),t._v(" "),e("p",[t._v("After connecting with the "),e("code",[t._v("http in")]),t._v(" node and defining the URL, we can make requests to our service through "),e("code",[t._v("Robot_IP:AddOn_Port/Your_URL")]),t._v(". However, we won't receive a response yet, so the next step is to create a response message object and return it to the request.")])]),t._v(" "),e("ol",{attrs:{start:"5"}},[e("li",[t._v("Generate a response message and use the "),e("code",[t._v("http response")]),t._v(" node to respond to the request.")])]),t._v(" "),e("div",{attrs:{align:"center"}},[e("video",{attrs:{width:"1000",controls:"",autoplay:""}},[e("source",{attrs:{src:s(757),type:"video/mp4"}})])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Note")]),t._v(" "),e("ul",[e("li",[t._v("Initially, we are unsure of the type and data structure of the query result. You can use the "),e("code",[t._v("inject")]),t._v(" node to manually trigger a query and use the "),e("code",[t._v("debug")]),t._v(" node to observe the return value.")]),t._v(" "),e("li",[t._v("The response can only be a string or object type, so boolean values need to be placed inside an object before returning.")])])]),t._v(" "),e("h2",{attrs:{id:"testing"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#testing"}},[t._v("#")]),t._v(" Testing")]),t._v(" "),e("p",[t._v("Here, we will use an API interface testing tool to test the service we just created.")]),t._v(" "),e("div",{attrs:{align:"center"}},[e("video",{attrs:{width:"1000",controls:"",autoplay:""}},[e("source",{attrs:{src:s(758),type:"video/mp4"}})])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("Congratulations")]),t._v(" "),e("p",[t._v("🎉 Now we can use our custom service to query the power status of the robot!")])])])}),[],!1,null,null,null);e.default=o.exports},751:function(t,e,s){t.exports=s.p+"assets/img/打包.a436a9fd.png"},752:function(t,e,s){t.exports=s.p+"assets/img/上传.d2e4e66e.png"},753:function(t,e,s){t.exports=s.p+"assets/img/运行AddOn.9ac58049.png"},754:function(t,e,s){t.exports=s.p+"assets/img/进入开发页面.432adecc.png"},755:function(t,e,s){t.exports=s.p+"assets/media/配置获取信息节点.fe91771d.mp4"},756:function(t,e,s){t.exports=s.p+"assets/media/添加Http监听.6c3affd9.mp4"},757:function(t,e,s){t.exports=s.p+"assets/media/添加Http响应.2f0fe415.mp4"},758:function(t,e,s){t.exports=s.p+"assets/media/测试.f23247be.mp4"}}]);